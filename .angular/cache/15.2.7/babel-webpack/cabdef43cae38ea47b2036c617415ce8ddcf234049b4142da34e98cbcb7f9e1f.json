{"ast":null,"code":"import { ShowingModel } from '../models/showing.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/sale.service\";\nimport * as i2 from \"../services/showing.service\";\nimport * as i3 from \"../services/schedule.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction ListSalesComponent_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r2.showID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r2.movieName);\n  }\n}\nfunction ListSalesComponent_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const s_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(3, 5, s_r3.date, \"dd-MM-yyyy HH:mm\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(s_r3.movieName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r3.schedule);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r3.tickets.length);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"$ \", s_r3.saleValue, \"\");\n  }\n}\nexport let ListSalesComponent = /*#__PURE__*/(() => {\n  class ListSalesComponent {\n    constructor(saleService, showingService, scheduleService, router) {\n      this.saleService = saleService;\n      this.showingService = showingService;\n      this.scheduleService = scheduleService;\n      this.router = router;\n      this.sales = [];\n      this.show = new ShowingModel();\n    }\n    ngOnInit() {\n      try {\n        this.showingService.getShowings().subscribe(data => {\n          this.showings = data;\n        });\n        this.allSales();\n      } catch (e) {\n        console.log(\"error: \" + e);\n      }\n    }\n    onChange() {\n      if (this.selectedItem != -1) {\n        this.saleService.getSalesgByShow(this.selectedItem).subscribe(data => {\n          this.sales = data;\n          this.sales.forEach(item => {\n            this.showingService.getShowingById(item.showingID).subscribe(d => {\n              if (d.movieName != undefined) {\n                item.movieName = d.movieName;\n              }\n              if (d.scheduleID != undefined) {\n                this.scheduleService.getScheduleById(d.scheduleID).subscribe(s => {\n                  item.schedule = s.hour + \":\" + s.minutes;\n                });\n              }\n            });\n          });\n        });\n      } else {\n        this.allSales();\n      }\n    }\n    allSales() {\n      this.saleService.getSales().subscribe(data => {\n        this.sales = data;\n        this.sales.forEach(item => {\n          this.showingService.getShowingById(item.showingID).subscribe(d => {\n            if (d.movieName != undefined) {\n              item.movieName = d.movieName;\n            }\n            if (d.scheduleID != undefined) {\n              this.scheduleService.getScheduleById(d.scheduleID).subscribe(s => {\n                item.schedule = s.hour + \":\" + s.minutes;\n              });\n            }\n          });\n        });\n      });\n    }\n  }\n  ListSalesComponent.ɵfac = function ListSalesComponent_Factory(t) {\n    return new (t || ListSalesComponent)(i0.ɵɵdirectiveInject(i1.SaleService), i0.ɵɵdirectiveInject(i2.ShowingService), i0.ɵɵdirectiveInject(i3.ScheduleService), i0.ɵɵdirectiveInject(i4.Router));\n  };\n  ListSalesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListSalesComponent,\n    selectors: [[\"app-list-sales\"]],\n    decls: 24,\n    vars: 3,\n    consts: [[1, \"showings\"], [3, \"ngModel\", \"change\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"value\", \"-1\"], [1, \"sales\"], [4, \"ngFor\", \"ngForOf\"], [3, \"value\"]],\n    template: function ListSalesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"label\");\n        i0.ɵɵtext(2, \"Showing Selection\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"br\");\n        i0.ɵɵelementStart(4, \"select\", 1);\n        i0.ɵɵlistener(\"change\", function ListSalesComponent_Template_select_change_4_listener() {\n          return ctx.onChange();\n        })(\"ngModelChange\", function ListSalesComponent_Template_select_ngModelChange_4_listener($event) {\n          return ctx.selectedItem = $event;\n        });\n        i0.ɵɵtemplate(5, ListSalesComponent_option_5_Template, 2, 2, \"option\", 2);\n        i0.ɵɵelementStart(6, \"option\", 3);\n        i0.ɵɵtext(7, \"ALL\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(8, \"div\", 4)(9, \"table\")(10, \"thead\")(11, \"tr\")(12, \"th\");\n        i0.ɵɵtext(13, \"Date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"th\");\n        i0.ɵɵtext(15, \"Movie Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"th\");\n        i0.ɵɵtext(17, \"Schedule\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"th\");\n        i0.ɵɵtext(19, \"No. Tickets\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"th\");\n        i0.ɵɵtext(21, \"Total Price\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(22, \"tbody\");\n        i0.ɵɵtemplate(23, ListSalesComponent_tr_23_Template, 12, 8, \"tr\", 5);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedItem);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.showings);\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngForOf\", ctx.sales);\n      }\n    },\n    dependencies: [i5.NgForOf, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgModel, i5.DatePipe],\n    styles: [\".showings[_ngcontent-%COMP%]{display:flex;justify-content:center}.sales[_ngcontent-%COMP%]{overflow-y:scroll;height:300px}table[_ngcontent-%COMP%]{width:700px;height:auto;text-align:center}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1em}\"]\n  });\n  return ListSalesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}