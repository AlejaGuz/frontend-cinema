{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/showing.service\";\nimport * as i2 from \"../services/chair.service\";\nimport * as i3 from \"../services/ticket.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction SaleComponent_option_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r2.showID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r2.movieName);\n  }\n}\nfunction SaleComponent_tr_7_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\")(1, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function SaleComponent_tr_7_td_1_Template_button_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.onClick($event));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const r_r5 = ctx.$implicit;\n    const c_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate2(\"id\", \"\", r_r5, \"\", c_r3, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", r_r5, \"\", c_r3, \"\");\n  }\n}\nfunction SaleComponent_tr_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, SaleComponent_tr_7_td_1_Template, 3, 4, \"td\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.rows);\n  }\n}\nexport class SaleComponent {\n  constructor(showingService, chairService, ticketService) {\n    this.showingService = showingService;\n    this.chairService = chairService;\n    this.ticketService = ticketService;\n    this.rows = Array.from({\n      length: 10\n    }, (_, index) => index + 1);\n    this.columns = [\"A\", \"B\", \"C\"];\n    this.saleValue = 0;\n    this.chairsList = [];\n  }\n  ngOnInit() {\n    //this.FullColumns();\n    try {\n      this.showingService.getShowings().subscribe(data => {\n        this.showings = data;\n      });\n    } catch (e) {\n      console.log(\"error: \" + e);\n    }\n  }\n  onChange() {\n    console.log(\"ID Selected: \" + this.selectedItem);\n    this.ticketService.getTicketsByShow(this.selectedItem).subscribe(data => {\n      console.log(\"Info getByID Showing: \" + data);\n    });\n  }\n  FullColumns() {\n    let start = 'A'; // letra de inicio\n    let end = 'F'; // letra final\n    for (let i = start.charCodeAt(0); i <= end.charCodeAt(0); i++) {\n      this.columns.push(String.fromCharCode(i));\n    }\n  }\n  onClick(event) {\n    console.log(\"El botón presionado es: \" + event.target.id);\n    let idB = this.getIdsRowColumn(event.target.id);\n    const button = document.getElementById(event.target.id);\n    if (button) {\n      if (button.style.backgroundColor == 'green') {\n        button.style.backgroundColor = 'lightgrey';\n      } else {\n        button.style.backgroundColor = 'green';\n        let row = parseInt(idB[0]);\n        console.log(\"column tranform: \" + idB[1]);\n        this.chairService.getChairByRowColumn(row, idB[1]).subscribe(data => {\n          console.log(data.toString());\n          this.chairsList.push(data);\n          console.log(\"length chairs: \" + this.chairsList.length);\n          this.chairService.getPriceByLever(data.levelID).subscribe(p => {\n            this.saleValue += p;\n          });\n        });\n      }\n    }\n  }\n  sell() {}\n  getIdsRowColumn(id) {\n    let splitIds = [];\n    if (id.length == 3) {\n      let num = id.charAt(0) + id.charAt(1);\n      let row = id.charAt(2);\n      splitIds.push(num);\n      splitIds.push(row);\n    } else {\n      let num = id.charAt(0);\n      let row = id.charAt(1);\n      splitIds.push(num);\n      splitIds.push(row);\n    }\n    return splitIds;\n  }\n}\nSaleComponent.ɵfac = function SaleComponent_Factory(t) {\n  return new (t || SaleComponent)(i0.ɵɵdirectiveInject(i1.ShowingService), i0.ɵɵdirectiveInject(i2.ChairService), i0.ɵɵdirectiveInject(i3.TicketService));\n};\nSaleComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SaleComponent,\n  selectors: [[\"app-sale\"]],\n  decls: 15,\n  vars: 4,\n  consts: [[1, \"box\"], [3, \"ngModel\", \"change\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"tableShows\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"saleValue\"], [\"id\", \"doSale\", 3, \"click\"], [3, \"value\"], [3, \"id\", \"click\"]],\n  template: function SaleComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\")(2, \"select\", 1);\n      i0.ɵɵlistener(\"change\", function SaleComponent_Template_select_change_2_listener() {\n        return ctx.onChange();\n      })(\"ngModelChange\", function SaleComponent_Template_select_ngModelChange_2_listener($event) {\n        return ctx.selectedItem = $event;\n      });\n      i0.ɵɵtemplate(3, SaleComponent_option_3_Template, 2, 2, \"option\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"div\")(5, \"table\", 3)(6, \"tbody\");\n      i0.ɵɵtemplate(7, SaleComponent_tr_7_Template, 2, 1, \"tr\", 4);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(8, \"div\")(9, \"h3\");\n      i0.ɵɵtext(10, \"Sale Value\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"p\", 5);\n      i0.ɵɵtext(12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function SaleComponent_Template_button_click_13_listener() {\n        return ctx.sell();\n      });\n      i0.ɵɵtext(14, \"SELL\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedItem);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.showings);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.columns);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"$ \", ctx.saleValue, \"\");\n    }\n  },\n  dependencies: [i4.NgForOf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgModel],\n  styles: [\"button[_ngcontent-%COMP%]:hover {\\r\\n    background: darkorange;\\r\\n    transform: scale(1.2);\\r\\n}\\r\\n\\r\\n.box[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    flex-wrap: wrap;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2FsZS9zYWxlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxzQkFBc0I7SUFDdEIscUJBQXFCO0FBQ3pCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLGVBQWU7QUFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyJidXR0b246aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZDogZGFya29yYW5nZTtcclxuICAgIHRyYW5zZm9ybTogc2NhbGUoMS4yKTtcclxufVxyXG5cclxuLmJveCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC13cmFwOiB3cmFwO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","SaleComponent","constructor","showingService","chairService","ticketService","Array","from","length","_","index","ngOnInit","getShowings","subscribe","data","showings","e","console","log","onChange","selectedItem","getTicketsByShow","FullColumns","start","end","i","charCodeAt","columns","push","String","fromCharCode","onClick","event","target","id","idB","getIdsRowColumn","button","document","getElementById","style","backgroundColor","row","parseInt","getChairByRowColumn","toString","chairsList","getPriceByLever","levelID","p","saleValue","sell","splitIds","num","charAt","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\Angular Test Projects\\frontend-cinema\\src\\app\\sale\\sale.component.html","D:\\Angular Test Projects\\frontend-cinema\\src\\app\\sale\\sale.component.ts"],"sourcesContent":["<div class=\"box\">\n    <div>\n        <select (change)=\"onChange()\"  [(ngModel)]=\"selectedItem\">\n            <option *ngFor=\"let item of showings\" [value]=\"item.showID\">{{ item.movieName }}</option>\n        </select>\n    </div>\n    <div>\n        <table class=\"tableShows\">\n            <tbody>\n                <tr *ngFor=\"let c of columns\">\n                    <td *ngFor=\"let r of rows\">\n                        <button (click)=\"onClick($event)\" id={{r}}{{c}}>{{r}}{{c}}</button>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    <div>\n        <h3>Sale Value</h3>\n        <p id=\"saleValue\" >$ {{saleValue}}</p>\n        <button id=\"doSale\" (click)=\"sell()\">SELL</button>\n    </div>\n</div>\n","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { ShowingModel } from '../models/showing.model';\nimport { ShowingService } from '../services/showing.service';\nimport { ChairService } from '../services/chair.service';\nimport { ChairModel } from '../models/chair.model';\nimport { TicketService } from '../services/ticket.service';\n\n@Component({\n  selector: 'app-sale',\n  templateUrl: './sale.component.html',\n  styleUrls: ['./sale.component.css']\n})\nexport class SaleComponent implements OnInit {\n\n  showings!: ShowingModel[];\n  selectedItem!: Number;\n  rows= Array.from({length: 10}, (_, index) => index + 1);\n  columns: String[] = [\"A\",\"B\",\"C\"];\n  saleValue: number = 0;\n  chairsList:ChairModel[] = [];\n\n  constructor(private showingService : ShowingService, private chairService: ChairService,\n    private ticketService: TicketService){}\n\n  ngOnInit(): void {\n    \n    //this.FullColumns();\n\n    try{\n\n      this.showingService.getShowings().subscribe(data=>{\n        \n        this.showings = data; \n\n   \n    });\n      \n\n    }catch(e){\n      console.log(\"error: \"+ e);\n    }\n    \n  }\n\n  public onChange(){\n\n    console.log(\"ID Selected: \"+this.selectedItem);\n\n    this.ticketService.getTicketsByShow(this.selectedItem).subscribe(data=>{\n      console.log(\"Info getByID Showing: \"+data);\n  });\n\n  }\n\n  private FullColumns(){\n    let start = 'A'; // letra de inicio\n    let end = 'F'; // letra final\n\n    for (let i = start.charCodeAt(0); i <= end.charCodeAt(0); i++) {\n      this.columns.push(String.fromCharCode(i));\n    }\n  }\n\n  onClick(event: any) {\n    console.log(\"El botón presionado es: \" + event.target.id);\n    \n    let idB = this.getIdsRowColumn(event.target.id);\n\n    const button = document.getElementById(event.target.id);\n    if (button) {\n      if(button.style.backgroundColor == 'green'){\n        button.style.backgroundColor = 'lightgrey';\n      }else{\n        button.style.backgroundColor = 'green';\n        \n\n          let row = parseInt(idB[0]);\n          console.log(\"column tranform: \"+ idB[1]);\n          this.chairService.getChairByRowColumn(row,idB[1]).subscribe(data=>{\n            console.log(data.toString());\n            this.chairsList.push(data);\n            console.log(\"length chairs: \"+ this.chairsList.length);\n            \n            this.chairService.getPriceByLever(data.levelID).subscribe(p=>{\n              this.saleValue+=p;\n            });\n          });\n      }\n      \n    }\n\n  }\n\n  public sell(){\n\n  }\n\n  private getIdsRowColumn(id:String): string[]{\n    let splitIds: string[] = [];\n    \n    if(id.length==3){\n      let num = id.charAt(0)+id.charAt(1);\n      let row = id.charAt(2);\n      splitIds.push(num);\n      splitIds.push(row);\n    }else{\n      let num = id.charAt(0);\n      let row = id.charAt(1);\n      splitIds.push(num);\n      splitIds.push(row);\n    }\n\n    return splitIds\n\n  }\n\n\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}