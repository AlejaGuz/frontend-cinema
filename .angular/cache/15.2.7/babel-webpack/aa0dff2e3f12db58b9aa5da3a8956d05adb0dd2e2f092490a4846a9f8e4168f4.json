{"ast":null,"code":"import { ScheduleModel } from '../models/schedule.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/schedule.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ManageDiscountComponent_option_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r3.scheduleID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", item_r3.hour, \":\", item_r3.minutes, \"\");\n  }\n}\nconst _c0 = function () {\n  return {\n    standalone: true\n  };\n};\nexport let ManageDiscountComponent = /*#__PURE__*/(() => {\n  class ManageDiscountComponent {\n    constructor(scheduleService, router) {\n      this.scheduleService = scheduleService;\n      this.router = router;\n      this.disCheck = false;\n    }\n    ngOnInit() {\n      this.scheduleService.getSchedules().subscribe(d => {\n        this.schedules = d;\n      });\n    }\n    onSubmitCreate() {\n      if (this.validateSubmit()) {\n        let schedule = new ScheduleModel();\n        schedule.hour = this.hour;\n        schedule.minutes = this.minutes;\n        if (this.disCheck) {\n          schedule.isDiscount = true;\n          schedule.discount = this.discount;\n        }\n        this.scheduleService.postSchedule(schedule).subscribe(d => {\n          window.alert(\"successful id: \" + d.scheduleID);\n        });\n        this.refresh();\n      } else {\n        window.alert(\"you can't leave fields blank\");\n      }\n    }\n    onChange() {\n      this.scheduleService.getScheduleById(this.selectedSchedule).subscribe(d => {\n        this.currentDisc = 0;\n        if (d.discount != undefined) {\n          this.currentDisc = d.discount;\n        }\n      });\n    }\n    onSubmitUpdate() {\n      if (this.selectedSchedule != null) {\n        if (this.discountUp != null) {\n          this.scheduleService.getScheduleById(this.selectedSchedule).subscribe(d => {\n            d.discount = this.discountUp;\n            this.scheduleService.updateSchedule(d).subscribe(u => {\n              console.log(\"update: \" + u);\n            });\n          });\n          this.refresh();\n        } else {\n          window.alert(\"Type any Discount\");\n        }\n      } else {\n        window.alert(\"Select any schedule to update\");\n      }\n    }\n    check(event) {\n      const myCheckbox = document.getElementById(\"isDisc\");\n      this.disCheck = myCheckbox.checked;\n      console.log(\"check: \" + this.disCheck);\n    }\n    validateSubmit() {\n      let flag = false;\n      if (this.hour != null && this.minutes != null) {\n        if (this.hour != 0) {\n          if (this.disCheck) {\n            if (this.discount != null) {\n              flag = true;\n            }\n          } else {\n            flag = true;\n          }\n        }\n      }\n      return flag;\n    }\n    refresh() {\n      this.router.navigateByUrl('/', {\n        skipLocationChange: true\n      }).then(() => {\n        this.router.navigate(['manage-discount']).then(() => {\n          console.log(`After navigation I am on:${this.router.url}`);\n        });\n      });\n    }\n  }\n  ManageDiscountComponent.ɵfac = function ManageDiscountComponent_Factory(t) {\n    return new (t || ManageDiscountComponent)(i0.ɵɵdirectiveInject(i1.ScheduleService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  ManageDiscountComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ManageDiscountComponent,\n    selectors: [[\"app-manage-discount\"]],\n    decls: 41,\n    vars: 19,\n    consts: [[1, \"box\"], [1, \"create\"], [3, \"ngSubmit\"], [\"form\", \"ngForm\"], [\"type\", \"number\", 1, \"sch\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [\"type\", \"checkbox\", \"id\", \"isDisc\", 3, \"change\"], [\"for\", \"isDisc\"], [\"type\", \"submit\", \"value\", \"Create\", 1, \"btn-create\"], [1, \"update\"], [3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", \"value\", \"Update\", 1, \"btn-create\"], [3, \"value\"]],\n    template: function ManageDiscountComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2, 3);\n        i0.ɵɵlistener(\"ngSubmit\", function ManageDiscountComponent_Template_form_ngSubmit_2_listener() {\n          return ctx.onSubmitCreate();\n        });\n        i0.ɵɵelementStart(4, \"fieldset\")(5, \"legend\");\n        i0.ɵɵtext(6, \"CREATE SCHEDULE\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"label\");\n        i0.ɵɵtext(8, \"HOUR:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function ManageDiscountComponent_Template_input_ngModelChange_9_listener($event) {\n          return ctx.hour = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"br\");\n        i0.ɵɵelementStart(11, \"label\");\n        i0.ɵɵtext(12, \"MINUTES:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function ManageDiscountComponent_Template_input_ngModelChange_13_listener($event) {\n          return ctx.minutes = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"input\", 5);\n        i0.ɵɵlistener(\"change\", function ManageDiscountComponent_Template_input_change_14_listener($event) {\n          return ctx.check($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"label\", 6);\n        i0.ɵɵtext(16, \"discount?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\")(18, \"label\");\n        i0.ɵɵtext(19, \"DISCOUNT %\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function ManageDiscountComponent_Template_input_ngModelChange_20_listener($event) {\n          return ctx.discount = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(21, \"br\")(22, \"input\", 7);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"div\", 8)(24, \"form\", 2, 3);\n        i0.ɵɵlistener(\"ngSubmit\", function ManageDiscountComponent_Template_form_ngSubmit_24_listener() {\n          return ctx.onSubmitUpdate();\n        });\n        i0.ɵɵelementStart(26, \"fieldset\")(27, \"legend\");\n        i0.ɵɵtext(28, \"UPDATE DISCOUNT\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"label\");\n        i0.ɵɵtext(30, \"SCHEDULE:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"select\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function ManageDiscountComponent_Template_select_ngModelChange_31_listener($event) {\n          return ctx.selectedSchedule = $event;\n        })(\"change\", function ManageDiscountComponent_Template_select_change_31_listener() {\n          return ctx.onChange();\n        });\n        i0.ɵɵtemplate(32, ManageDiscountComponent_option_32_Template, 2, 3, \"option\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"p\");\n        i0.ɵɵtext(34);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(35, \"br\");\n        i0.ɵɵelementStart(36, \"label\");\n        i0.ɵɵtext(37, \"DISCOUNT %\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function ManageDiscountComponent_Template_input_ngModelChange_38_listener($event) {\n          return ctx.discountUp = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(39, \"br\")(40, \"input\", 11);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.hour)(\"ngModelOptions\", i0.ɵɵpureFunction0(14, _c0));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.minutes)(\"ngModelOptions\", i0.ɵɵpureFunction0(15, _c0));\n        i0.ɵɵadvance(4);\n        i0.ɵɵstyleProp(\"display\", ctx.disCheck ? \"block\" : \"none\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.discount)(\"ngModelOptions\", i0.ɵɵpureFunction0(16, _c0));\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedSchedule)(\"ngModelOptions\", i0.ɵɵpureFunction0(17, _c0));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.schedules);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Current Discount: \", ctx.currentDisc, \"%\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.discountUp)(\"ngModelOptions\", i0.ɵɵpureFunction0(18, _c0));\n      }\n    },\n    dependencies: [i3.NgForOf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm],\n    styles: [\".box[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}input[_ngcontent-%COMP%]{border-radius:10px}.sch[_ngcontent-%COMP%]{width:50px}.btn-create[_ngcontent-%COMP%]{border-radius:10px;background-color:#302b96;color:#f0f8ff;width:100px}.btn-create[_ngcontent-%COMP%]:hover{background:darkorange;transform:scale(1.2);font-weight:700;opacity:.5}.create[_ngcontent-%COMP%]{margin-right:2em}select[_ngcontent-%COMP%]{border-radius:10px;margin-top:.3em}fieldset[_ngcontent-%COMP%]{border:5px solid saddlebrown;border-radius:10px;padding:1em;align-items:center;display:flex;flex-direction:column}legend[_ngcontent-%COMP%]{font-weight:700}\"]\n  });\n  return ManageDiscountComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}