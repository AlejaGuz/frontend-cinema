{"ast":null,"code":"import { ScheduleModel } from '../models/schedule.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/schedule.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ManageDiscountComponent_option_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r3.scheduleID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", item_r3.hour, \":\", item_r3.minutes, \"\");\n  }\n}\nconst _c0 = function () {\n  return {\n    standalone: true\n  };\n};\nexport class ManageDiscountComponent {\n  constructor(scheduleService, router) {\n    this.scheduleService = scheduleService;\n    this.router = router;\n    this.disCheck = false;\n  }\n  ngOnInit() {\n    this.scheduleService.getSchedules().subscribe(d => {\n      this.schedules = d;\n    });\n  }\n  onSubmitCreate() {\n    if (this.validateSubmit()) {\n      let schedule = new ScheduleModel();\n      schedule.hour = this.hour;\n      schedule.minutes = this.minutes;\n      if (this.disCheck) {\n        schedule.isDiscount = true;\n        schedule.discount = this.discount;\n      }\n      this.scheduleService.postSchedule(schedule).subscribe(d => {\n        window.alert(\"successful id: \" + d.scheduleID);\n      });\n      this.router.navigateByUrl('/', {\n        skipLocationChange: true\n      }).then(() => {\n        this.router.navigate(['manage-discount']).then(() => {\n          console.log(`After navigation I am on:${this.router.url}`);\n        });\n      });\n    } else {\n      window.alert(\"you can't leave fields blank\");\n    }\n  }\n  onChange() {\n    this.scheduleService.getScheduleById(this.selectedSchedule).subscribe(d => {\n      this.currentDisc = 0;\n      if (d.discount != undefined) {\n        this.currentDisc = d.discount;\n      }\n    });\n  }\n  onSubmitUpdate() {\n    if (this.selectedSchedule != null) {\n      if (this.discountUp != null) {\n        console.log(\"discountUp: \" + this.discountUp);\n      }\n    } else {\n      window.alert(\"Select any schedule to update\");\n    }\n  }\n  check(event) {\n    const myCheckbox = document.getElementById(\"isDisc\");\n    this.disCheck = myCheckbox.checked;\n    console.log(\"check: \" + this.disCheck);\n  }\n  validateSubmit() {\n    let flag = false;\n    if (this.hour != null && this.minutes != null) {\n      if (this.hour != 0) {\n        if (this.disCheck) {\n          if (this.discount != null) {\n            flag = true;\n          }\n        } else {\n          flag = true;\n        }\n      }\n    }\n    return flag;\n  }\n}\nManageDiscountComponent.ɵfac = function ManageDiscountComponent_Factory(t) {\n  return new (t || ManageDiscountComponent)(i0.ɵɵdirectiveInject(i1.ScheduleService), i0.ɵɵdirectiveInject(i2.Router));\n};\nManageDiscountComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ManageDiscountComponent,\n  selectors: [[\"app-manage-discount\"]],\n  decls: 41,\n  vars: 19,\n  consts: [[1, \"box\"], [1, \"create\"], [3, \"ngSubmit\"], [\"form\", \"ngForm\"], [\"type\", \"number\", 1, \"sch\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [\"type\", \"checkbox\", \"id\", \"isDisc\", 3, \"change\"], [\"for\", \"isDisc\"], [\"type\", \"submit\", \"value\", \"Create\", 1, \"btn-create\"], [1, \"update\"], [3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", \"value\", \"Update\", 1, \"btn-create\"], [3, \"value\"]],\n  template: function ManageDiscountComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2, 3);\n      i0.ɵɵlistener(\"ngSubmit\", function ManageDiscountComponent_Template_form_ngSubmit_2_listener() {\n        return ctx.onSubmitCreate();\n      });\n      i0.ɵɵelementStart(4, \"fieldset\")(5, \"legend\");\n      i0.ɵɵtext(6, \"CREATE SCHEDULE\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"label\");\n      i0.ɵɵtext(8, \"HOUR:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function ManageDiscountComponent_Template_input_ngModelChange_9_listener($event) {\n        return ctx.hour = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"br\");\n      i0.ɵɵelementStart(11, \"label\");\n      i0.ɵɵtext(12, \"MINUTES:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function ManageDiscountComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.minutes = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"input\", 5);\n      i0.ɵɵlistener(\"change\", function ManageDiscountComponent_Template_input_change_14_listener($event) {\n        return ctx.check($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"label\", 6);\n      i0.ɵɵtext(16, \"discount?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\")(18, \"label\");\n      i0.ɵɵtext(19, \"DISCOUNT %\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function ManageDiscountComponent_Template_input_ngModelChange_20_listener($event) {\n        return ctx.discount = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(21, \"br\")(22, \"input\", 7);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(23, \"div\", 8)(24, \"form\", 2, 3);\n      i0.ɵɵlistener(\"ngSubmit\", function ManageDiscountComponent_Template_form_ngSubmit_24_listener() {\n        return ctx.onSubmitUpdate();\n      });\n      i0.ɵɵelementStart(26, \"fieldset\")(27, \"legend\");\n      i0.ɵɵtext(28, \"UPDATE DISCOUNT\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"label\");\n      i0.ɵɵtext(30, \"SCHEDULE:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"select\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function ManageDiscountComponent_Template_select_ngModelChange_31_listener($event) {\n        return ctx.selectedSchedule = $event;\n      })(\"change\", function ManageDiscountComponent_Template_select_change_31_listener() {\n        return ctx.onChange();\n      });\n      i0.ɵɵtemplate(32, ManageDiscountComponent_option_32_Template, 2, 3, \"option\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"p\");\n      i0.ɵɵtext(34);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(35, \"br\");\n      i0.ɵɵelementStart(36, \"label\");\n      i0.ɵɵtext(37, \"DISCOUNT %\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function ManageDiscountComponent_Template_input_ngModelChange_38_listener($event) {\n        return ctx.discountUp = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(39, \"br\")(40, \"input\", 11);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.hour)(\"ngModelOptions\", i0.ɵɵpureFunction0(14, _c0));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.minutes)(\"ngModelOptions\", i0.ɵɵpureFunction0(15, _c0));\n      i0.ɵɵadvance(4);\n      i0.ɵɵstyleProp(\"display\", ctx.disCheck ? \"block\" : \"none\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.discount)(\"ngModelOptions\", i0.ɵɵpureFunction0(16, _c0));\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedSchedule)(\"ngModelOptions\", i0.ɵɵpureFunction0(17, _c0));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.schedules);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Current Discount: \", ctx.currentDisc, \"%\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.discountUp)(\"ngModelOptions\", i0.ɵɵpureFunction0(18, _c0));\n    }\n  },\n  dependencies: [i3.NgForOf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm],\n  styles: [\".box[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    flex-wrap: wrap;\\r\\n}\\r\\n\\r\\ninput[_ngcontent-%COMP%]{\\r\\n    border-radius: 10px;\\r\\n}\\r\\n\\r\\n.sch[_ngcontent-%COMP%]{\\r\\n    width: 50px;\\r\\n}\\r\\n\\r\\n.btn-create[_ngcontent-%COMP%]{\\r\\n    border-radius: 10px;\\r\\n    background-color: #302b96;\\r\\n    color: aliceblue;\\r\\n    width: 100px;\\r\\n}\\r\\n\\r\\n.btn-create[_ngcontent-%COMP%]:hover{\\r\\n    background: darkorange;\\r\\n    transform: scale(1.2);\\r\\n    font-weight: bold;\\r\\n    opacity: 0.5;\\r\\n}\\r\\n\\r\\n.create[_ngcontent-%COMP%]{\\r\\n    margin-right: 2em;\\r\\n}\\r\\n\\r\\nselect[_ngcontent-%COMP%]{\\r\\n    border-radius: 10px;\\r\\n    margin-top: 0.3em;\\r\\n}\\r\\n\\r\\nfieldset[_ngcontent-%COMP%]{\\r\\n\\r\\n    border: 5px solid saddlebrown;\\r\\n    border-radius: 10px;\\r\\n    padding: 1em;\\r\\n    align-items: center;\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n\\r\\n}\\r\\n\\r\\nlegend[_ngcontent-%COMP%]{\\r\\n    font-weight: bold;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbWFuYWdlLWRpc2NvdW50L21hbmFnZS1kaXNjb3VudC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksYUFBYTtJQUNiLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxXQUFXO0FBQ2Y7O0FBRUE7SUFDSSxtQkFBbUI7SUFDbkIseUJBQXlCO0lBQ3pCLGdCQUFnQjtJQUNoQixZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksc0JBQXNCO0lBQ3RCLHFCQUFxQjtJQUNyQixpQkFBaUI7SUFDakIsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLGlCQUFpQjtBQUNyQjs7QUFFQTtJQUNJLG1CQUFtQjtJQUNuQixpQkFBaUI7QUFDckI7O0FBRUE7O0lBRUksNkJBQTZCO0lBQzdCLG1CQUFtQjtJQUNuQixZQUFZO0lBQ1osbUJBQW1CO0lBQ25CLGFBQWE7SUFDYixzQkFBc0I7O0FBRTFCOztBQUVBO0lBQ0ksaUJBQWlCO0FBQ3JCIiwic291cmNlc0NvbnRlbnQiOlsiLmJveCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC13cmFwOiB3cmFwO1xyXG59XHJcblxyXG5pbnB1dHtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbn1cclxuXHJcbi5zY2h7XHJcbiAgICB3aWR0aDogNTBweDtcclxufVxyXG5cclxuLmJ0bi1jcmVhdGV7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzMwMmI5NjtcclxuICAgIGNvbG9yOiBhbGljZWJsdWU7XHJcbiAgICB3aWR0aDogMTAwcHg7XHJcbn1cclxuXHJcbi5idG4tY3JlYXRlOmhvdmVye1xyXG4gICAgYmFja2dyb3VuZDogZGFya29yYW5nZTtcclxuICAgIHRyYW5zZm9ybTogc2NhbGUoMS4yKTtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgb3BhY2l0eTogMC41O1xyXG59XHJcblxyXG4uY3JlYXRle1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAyZW07XHJcbn1cclxuXHJcbnNlbGVjdHtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICBtYXJnaW4tdG9wOiAwLjNlbTtcclxufVxyXG5cclxuZmllbGRzZXR7XHJcblxyXG4gICAgYm9yZGVyOiA1cHggc29saWQgc2FkZGxlYnJvd247XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgcGFkZGluZzogMWVtO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG5cclxufVxyXG5cclxubGVnZW5ke1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["ScheduleModel","i0","ManageDiscountComponent","constructor","scheduleService","router","ngOnInit","getSchedules","subscribe","d","schedules","onSubmitCreate","validateSubmit","schedule","hour","minutes","disCheck","isDiscount","discount","postSchedule","window","alert","scheduleID","navigateByUrl","skipLocationChange","then","navigate","console","log","url","onChange","getScheduleById","selectedSchedule","currentDisc","undefined","onSubmitUpdate","discountUp","check","event","myCheckbox","document","getElementById","checked","flag","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\Angular Test Projects\\frontend-cinema\\src\\app\\manage-discount\\manage-discount.component.ts","D:\\Angular Test Projects\\frontend-cinema\\src\\app\\manage-discount\\manage-discount.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ScheduleService } from '../services/schedule.service';\nimport { ScheduleModel } from '../models/schedule.model';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-manage-discount',\n  templateUrl: './manage-discount.component.html',\n  styleUrls: ['./manage-discount.component.css']\n})\nexport class ManageDiscountComponent implements OnInit{\n\n  hour!:number;\n  minutes!:number;\n  disCheck: boolean = false;\n  discount!:number;\n  selectedSchedule!:Number;\n  schedules!: ScheduleModel[];\n  currentDisc!:number;\n  discountUp!:number;\n\n  constructor(private scheduleService: ScheduleService, private router: Router) {\n\n    \n  }\n\n  ngOnInit(): void {\n      this.scheduleService.getSchedules().subscribe(d=>{\n        this.schedules = d;\n      });\n  }\n\n  onSubmitCreate(){\n    if(this.validateSubmit()){\n\n      let schedule = new ScheduleModel();\n      schedule.hour = this.hour;\n      schedule.minutes = this.minutes;\n      if(this.disCheck){\n        schedule.isDiscount=true;\n        schedule.discount = this.discount;\n      }\n\n      this.scheduleService.postSchedule(schedule).subscribe(d=>{\n        window.alert(\"successful id: \"+d.scheduleID);\n      });\n\n      this.router.navigateByUrl('/',{skipLocationChange:true}).then(()=>{\n        this.router.navigate(['manage-discount']).then(()=>{\n          console.log(`After navigation I am on:${this.router.url}`)\n        })\n      });\n      \n    }else{\n      window.alert(\"you can't leave fields blank\");\n    }\n  }\n\n  onChange(){\n    this.scheduleService.getScheduleById(this.selectedSchedule).subscribe(d=>{\n      this.currentDisc = 0;\n      if(d.discount!=undefined){\n        this.currentDisc = d.discount;\n      }\n    });\n  }\n\n  onSubmitUpdate(){\n    if(this.selectedSchedule!=null){\n      if(this.discountUp!=null){\n        console.log(\"discountUp: \"+this.discountUp);\n      }\n    }else{\n      window.alert(\"Select any schedule to update\");\n    }\n  }\n\n  public check(event: any){\n    \n    const myCheckbox = document.getElementById(\"isDisc\") as HTMLInputElement;\n    this.disCheck = myCheckbox.checked;\n\n    console.log(\"check: \"+this.disCheck);\n\n  }\n\n  private validateSubmit():boolean{\n    let flag = false;\n\n    if(this.hour!=null && this.minutes!=null){\n      if(this.hour!=0){\n        if(this.disCheck){\n          if(this.discount!=null){\n            flag=true\n          }\n        }else{\n          flag=true\n        }\n      }\n    }\n\n    return flag;\n  }\n\n}\n","<div class=\"box\">\n    <div class=\"create\">\n        <form #form=\"ngForm\" (ngSubmit)=\"onSubmitCreate()\">\n            <fieldset>\n                <legend>CREATE SCHEDULE</legend>\n                <label>HOUR:</label>\n                <input class=\"sch\" type=\"number\" [(ngModel)]=\"hour\" [ngModelOptions]=\"{ standalone: true }\">\n                <br>\n                <label>MINUTES:</label>\n                <input class=\"sch\" type=\"number\" [(ngModel)]=\"minutes\" [ngModelOptions]=\"{ standalone: true }\">\n                \n                <input type=\"checkbox\" id=\"isDisc\" (change)=\"check($event)\">\n                <label for=\"isDisc\">discount?</label>\n                    \n                <div [style.display]=\"disCheck ? 'block' : 'none'\">\n                    <label>DISCOUNT %</label>\n                    <input class=\"sch\" type=\"number\" [(ngModel)]=\"discount\" [ngModelOptions]=\"{ standalone: true }\">\n                </div>\n                <br>\n                <input type=\"submit\" value=\"Create\" class=\"btn-create\">\n            </fieldset>\n        </form>\n    </div>\n    <div class=\"update\">\n        <form #form=\"ngForm\" (ngSubmit)=\"onSubmitUpdate()\">\n            <fieldset>\n                <legend>UPDATE DISCOUNT</legend>\n            \n                <label>SCHEDULE:</label>\n                <select [(ngModel)]=\"selectedSchedule\" [ngModelOptions]=\"{ standalone: true }\" (change)=\"onChange()\">\n                    <option *ngFor=\"let item of schedules\" [value]=\"item.scheduleID\">{{item.hour}}:{{item.minutes}}</option>\n                </select>\n                <p>Current Discount: {{currentDisc}}%</p>\n                <br>\n                <label>DISCOUNT %</label>\n                <input class=\"sch\" type=\"number\" [(ngModel)]=\"discountUp\" [ngModelOptions]=\"{ standalone: true }\">\n                <br>\n                <input type=\"submit\" value=\"Update\" class=\"btn-create\">\n            </fieldset>\n        </form>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}